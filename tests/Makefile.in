
.PHONY: tests quicktests cc_tests psirb_tests clean quicktestsclean

cc_subdirs = cc1 cc2 cc4 #cc5 cc8 cc8a these should be restored when fixed

rb_subdirs = 

ci_subdirs = 

dcft_subdirs = dcft1 dcft2 dcft3

mcscf_subdirs = #mcscf1-rhf this is also broken

df_subdirs = sapt1 dfmp2

psimrcc_subdirs = 

mints_subdirs = mints1

scf_subdirs = scf1 scf2 scf3 scf4 sad1

subdirs = \
$(mints_subdirs) \
$(scf_subdirs) \
$(df_subdirs) \
$(cc_subdirs) \
${mcscf_subdirs} 
#$(dcft_subdirs) \

# the bare minimum
quicktestdirs = 

tests:
	for dir in $(subdirs); \
	do \
	 (cd $${dir} && echo ...Testing $${dir}... && $(MAKE)) || exit 1; \
	done

quicktests:
	for dir in $(quicktestdirs); \
	do \
	 (cd $${dir} && echo ...Testing $${dir}... && $(MAKE)) || exit 1; \
	done

cc_tests:
	for dir in $(cc_subdirs); \
	do \
	 (cd $${dir} && echo ...Testing $${dir}... && $(MAKE)) || exit 1; \
	done

ci_tests:
	for dir in $(ci_subdirs); \
	do \
	 (cd $${dir} && echo ...Testing $${dir}... && $(MAKE)) || exit 1; \
	done

mints_tests:
	for dir in $(mints_subdirs); \
	do \
	 (cd $${dir} && echo ...Testing $${dir}... && $(MAKE)) || exit 1; \
	done

mcscf_tests:
	for dir in $(mcscf_subdirs); \
	do \
	 (cd $${dir} && echo ...Testing $${dir}... && $(MAKE)) || exit 1; \
	done

scf_tests:
	for dir in $(scf_subdirs); \
	do \
	 (cd $${dir} && echo ...Testing $${dir}... && $(MAKE)) || exit 1; \
	done

df_tests:
	for dir in $(df_subdirs); \
	do \
	 (cd $${dir} && echo ...Testing $${dir}... && $(MAKE)) || exit 1; \
	done

dcft_tests:
	for dir in $(dcft_subdirs); \
	do \
	 (cd $${dir} && echo ...Testing $${dir}... && $(MAKE)) || exit 1; \
	done

psimrcc_tests:
	for dir in $(psimrcc_subdirs); \
	do \
	 (cd $${dir} && echo ...Testing $${dir}... && $(MAKE)) || exit 1; \
	done

psirb_tests:
	for dir in $(rb_subdirs); \
	do \
	 (cd $${dir} && echo ...Testing $${dir}... && $(MAKE)) || exit 1; \
	done

clean:
	for dir in $(subdirs); \
	do \
	 (cd $${dir} && echo ...Cleaning $${dir}... && $(MAKE) clean) || exit 1; \
	done
	rm -f ../test-case-results

quicktestsclean:
	for dir in $(quicktestdirs); \
	do \
	 (cd $${dir} && echo ...Cleaning $${dir}... && $(MAKE) clean) || exit 1; \
	done
	rm -f ../test-case-results

top_srcdir = @top_srcdir@
srcdir = @srcdir@
top_objdir = ..

$(top_srcdir)/configure: $(top_srcdir)/configure.ac $(top_srcdir)/aclocal.m4
	cd $(top_srcdir) && autoconf

$(top_objdir)/config.status: $(top_srcdir)/configure
	cd $(top_objdir) && ./config.status --recheck

Makefile: $(srcdir)/Makefile.in $(top_objdir)/config.status
	cd $(top_objdir) && CONFIG_FILES=tests/Makefile ./config.status

