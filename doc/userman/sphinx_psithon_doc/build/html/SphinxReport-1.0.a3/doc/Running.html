


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Running a build &mdash; Psithon for PSI4 documentation</title>
    
    <link rel="stylesheet" href="../../_static/psi4.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '4.01',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/toggle_sections.js"></script>
    <link rel="top" title="Psithon for PSI4 documentation" href="../../index.html" /> 
    <script type="text/javascript" src="../../_static/copybutton.js"></script> 

  </head>
  <body>
    <div class="relbar-top">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
    <li><a href="../../index.html">Psithon for PSI4 Documentation</a> &raquo; </li>
 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="running-a-build">
<span id="running"></span><h1>Running a build<a class="headerlink" href="#running-a-build" title="Permalink to this headline">¶</a></h1>
<p>Building a restructured text document is an iterative process that involves
usually the following steps:</p>
<ol class="arabic simple" start="0">
<li>Setting up a new <tt class="xref py py-mod docutils literal"><span class="pre">SphinxReport</span></tt> project using <a class="reference internal" href="#sphinxreport-quickstart"><em>sphinxreport-quickstart</em></a>.</li>
<li>Writing some text.</li>
<li>Adding the python code for <a class="reference internal" href="Glossary.html#term-tracker"><em class="xref std std-term">Tracker</em></a> as a data source.</li>
<li>Testing the <a class="reference internal" href="Glossary.html#term-tracker"><em class="xref std std-term">Tracker</em></a> and customizing the plot using <a class="reference internal" href="#sphinxreport-test"><em>sphinxreport-test</em></a></li>
<li>Inserting the :report: directive into the text.</li>
<li>Optionally, remove existing cached data of this <a class="reference internal" href="Glossary.html#term-tracker"><em class="xref std std-term">Tracker</em></a> using <a class="reference internal" href="#sphinxreport-clean"><em>sphinxreport-clean</em></a>.</li>
<li>Building the text using <a class="reference internal" href="#sphinxreport-build"><em>sphinxreport-build</em></a> or the <a class="reference internal" href="#makefile"><em>Makefile</em></a>.</li>
</ol>
<p>Steps 1-6 are repeated until the document is finished.</p>
<div class="section" id="command-line-utilities">
<h2>Command line utilities<a class="headerlink" href="#command-line-utilities" title="Permalink to this headline">¶</a></h2>
<p>This page explains the various utilities that come with <tt class="xref py py-mod docutils literal"><span class="pre">SphinxReport</span></tt>.</p>
<div class="section" id="makefile">
<span id="id1"></span><h3>Makefile<a class="headerlink" href="#makefile" title="Permalink to this headline">¶</a></h3>
<p>If a project has been set up with the <tt class="file docutils literal"><span class="pre">sphinxreport-quickstart</span></tt> utility,
then the build process can be controlled from a Makefile. In the
<a class="reference internal" href="Glossary.html#term-source-directory"><em class="xref std std-term">source directory</em></a> type:</p>
<div class="highlight-python"><pre>make help</pre>
</div>
<p>for a list of all commands available.</p>
</div>
<div class="section" id="sphinxreport-quickstart">
<span id="id2"></span><h3>sphinxreport-quickstart<a class="headerlink" href="#sphinxreport-quickstart" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="file docutils literal"><span class="pre">sphinxreport-quickstart</span></tt> utility sets up a <tt class="xref py py-mod docutils literal"><span class="pre">sphinxreport</span></tt>
project. It is called as:</p>
<div class="highlight-python"><pre>$ sphinxreport-build -d new_project</pre>
</div>
<dl class="docutils">
<dt><strong>-d/&#8211;destination</strong> directory</dt>
<dd>setup project using <em>directory</em> as the <a class="reference internal" href="Glossary.html#term-source-directory"><em class="xref std std-term">source directory</em></a>.. The default
is &#8221;.&#8221;, the current directory.</dd>
</dl>
</div>
<div class="section" id="sphinx-build">
<h3>sphinx-build<a class="headerlink" href="#sphinx-build" title="Permalink to this headline">¶</a></h3>
<p>At its simplest, <tt class="xref py py-mod docutils literal"><span class="pre">SphinxReport</span></tt> is a <tt class="xref py py-mod docutils literal"><span class="pre">Sphinx</span></tt> extension
and all images are simply built using the usual <tt class="xref py py-mod docutils literal"><span class="pre">Sphinx</span></tt> build.
See the <cite>Sphinx documentation &lt;http://sphinx.pocoo.org/intro.html#running-a-build&gt;</cite>
on how to run a build.</p>
</div>
<div class="section" id="sphinxreport-build">
<span id="id3"></span><h3>sphinxreport-build<a class="headerlink" href="#sphinxreport-build" title="Permalink to this headline">¶</a></h3>
<p>Rendering many images and extracting data takes time. The <tt class="file docutils literal"><span class="pre">sphinxreport-build</span></tt>
utility can speed up this process by running several rendering processes in parallel.
Note that <a class="reference internal" href="#caching"><em>Caching</em></a> needs to be enabled for this to work. It also takes care of
building the <a class="reference internal" href="#gallery"><em>Gallery</em></a>. It is invoked as a prefix to the <tt class="file docutils literal"><span class="pre">sphinx-build</span></tt>
command, for example:</p>
<div class="highlight-python"><pre>$ sphinxreport-build --num-jobs=4 sphinx-build -b html -d _build/doctrees   . _build/html</pre>
</div>
<p>Options for sphinxreport-build are:</p>
<dl class="docutils">
<dt><strong>-a/&#8211;num-jobs</strong> <em>jobs</em></dt>
<dd>Number of parallel jobs to execute. The default value is 2.</dd>
</dl>
</div>
<div class="section" id="sphinxreport-clean">
<span id="id4"></span><h3>sphinxreport-clean<a class="headerlink" href="#sphinxreport-clean" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="file docutils literal"><span class="pre">sphinxreport-clean</span></tt> utility removes files from a previous built. It is called as:</p>
<div class="highlight-python"><pre>$ sphinxreport-clean [*target* [[*tracker] ...]</pre>
</div>
<p>Where <em>target</em> can be one of</p>
<dl class="docutils">
<dt><strong>clean</strong></dt>
<dd>Remove the latest rendered documents, but leaves cached data.</dd>
<dt><strong>distclean</strong></dt>
<dd>Remove all build information including cached data.</dd>
<dt><strong>&lt;tracker&gt;</strong></dt>
<dd>The name of a tracker. All images, cached data and text elements based
on this tracker are removed so that they will be re-build during the
next build. Multiple trackers can be named on the command line.</dd>
</dl>
</div>
<div class="section" id="sphinxreport-test">
<span id="id5"></span><h3>sphinxreport-test<a class="headerlink" href="#sphinxreport-test" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="file docutils literal"><span class="pre">sphinxreport-test</span></tt> utility presents previews of graphs and tables. It
can also generate templater restructured text for cutting and pasting into a
document. It is called as</p>
<blockquote>
<div>$ sphinxreport-test tracker renderer</div></blockquote>
<dl class="docutils">
<dt><strong>-t/&#8211;tracker</strong> tracker</dt>
<dd>Tracker to use.</dd>
<dt><strong>-a/&#8211;tracks</strong> tracks</dt>
<dd>Tracks to display as a comma-separated list.</dd>
<dt><strong>-s/&#8211;slices</strong> slices</dt>
<dd>Slices to display as a comma-separated list.</dd>
<dt><strong>-r/&#8211;renderer</strong> renderer</dt>
<dd>Renderer to use.</dd>
<dt><strong>-o/&#8211;option</strong> option</dt>
<dd>Options for the renderer. Supply as key=value pairs (without spaces). Several <strong>-o</strong> options can
be supplied on the command line.</dd>
<dt><strong>&#8211;no-print</strong></dt>
<dd>Do not print an rst text template corresponding to the displayed plots.</dd>
<dt><strong>&#8211;no-plot</strong></dt>
<dd>Do not plot.</dd>
</dl>
<p>If no command line arguments are given all Trackers are build in parallel.</p>
</div>
<div class="section" id="sphinxreport-gallery">
<span id="id6"></span><h3>sphinxreport-gallery<a class="headerlink" href="#sphinxreport-gallery" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="file docutils literal"><span class="pre">sphinxreport-gallery</span></tt> utility examines the build directory for images
and constructs a gallery. It should be called from the <a class="reference internal" href="Glossary.html#term-source-directory"><em class="xref std std-term">source directory</em></a>.</p>
<blockquote>
<div>$ sphinxreport-gallery</div></blockquote>
<p>Calling <tt class="file docutils literal"><span class="pre">sphinxreport-gallery</span></tt> is usually not necessary if <tt class="file docutils literal"><span class="pre">sphinxreport-build</span></tt>
is used.</p>
</div>
</div>
<div class="section" id="debugging">
<span id="id7"></span><h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h2>
<p>Information and debugging messages from to the <tt class="docutils literal"><span class="pre">report</span></tt> directive are
written to the file <tt class="file docutils literal"><span class="pre">sphinxreport.log</span></tt> in the current directory.</p>
</div>
<div class="section" id="caching">
<span id="id8"></span><h2>Caching<a class="headerlink" href="#caching" title="Permalink to this headline">¶</a></h2>
<p>Extracting data from a database potentially takes much time if a lot of processing
is involved or the data set is large. To speed up the writing process <tt class="xref py py-mod docutils literal"><span class="pre">SphinxReport</span></tt>
is able to cache function calls to a <a class="reference internal" href="Glossary.html#term-tracker"><em class="xref std std-term">Tracker</em></a> if the configuration variable
<tt class="docutils literal"><span class="pre">cachedir</span></tt> is set, for example to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cachedir</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s">&quot;_cache&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Enabling caching will speed up the build process considerably, in particular as
<a class="reference internal" href="#sphinxreport-build"><em>sphinxreport-build</em></a> can make use of parallel data gathering and plotting.
Unfortunately currently there is no <a class="reference internal" href="#dependency"><em>Dependency checking</em></a> checking for cached data.
Thus, changes in the code of a <a class="reference internal" href="Glossary.html#term-tracker"><em class="xref std std-term">Tracker</em></a> or changes in the data will not
result in an automatic update of the cache. The best solution is to manually
delete the cached data using the command <a class="reference internal" href="#sphinxreport-clean"><em>sphinxreport-clean</em></a>.</p>
</div>
<div class="section" id="dependency-checking">
<span id="dependency"></span><h2>Dependency checking<a class="headerlink" href="#dependency-checking" title="Permalink to this headline">¶</a></h2>
<p><tt class="xref py py-mod docutils literal"><span class="pre">Sphinx</span></tt> implements dependency checking such that existing documents are only rebuilt
if the underlying sources have changed. The same dependency checking is still available in
<tt class="xref py py-mod docutils literal"><span class="pre">SphinxReport</span></tt>, however currently there is no dependency checking between the data
source and an existing image. As long as an image or table is present on the file system, it
will not be re-rendered even if the document or the underlying data has changed. To force
re-rendering, use the command <a class="reference internal" href="#sphinxreport-clean"><em>sphinxreport-clean</em></a>.</p>
</div>
<div class="section" id="gallery">
<span id="id9"></span><h2>Gallery<a class="headerlink" href="#gallery" title="Permalink to this headline">¶</a></h2>
<p><tt class="xref py py-mod docutils literal"><span class="pre">SphinxReport</span></tt> builds a gallery of all plots created similar to the
<a class="reference external" href="matplotlib.sourceforge.net/gallery.html">matplotlib gallery</a>. The gallery
can be built manually with <tt class="file docutils literal"><span class="pre">sphinxreport-gallery</span></tt>, but is also built
automatically by <tt class="file docutils literal"><span class="pre">sphinxreport-build</span></tt>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Running a build</a><ul>
<li><a class="reference internal" href="#command-line-utilities">Command line utilities</a><ul>
<li><a class="reference internal" href="#makefile">Makefile</a></li>
<li><a class="reference internal" href="#sphinxreport-quickstart">sphinxreport-quickstart</a></li>
<li><a class="reference internal" href="#sphinx-build">sphinx-build</a></li>
<li><a class="reference internal" href="#sphinxreport-build">sphinxreport-build</a></li>
<li><a class="reference internal" href="#sphinxreport-clean">sphinxreport-clean</a></li>
<li><a class="reference internal" href="#sphinxreport-test">sphinxreport-test</a></li>
<li><a class="reference internal" href="#sphinxreport-gallery">sphinxreport-gallery</a></li>
</ul>
</li>
<li><a class="reference internal" href="#debugging">Debugging</a></li>
<li><a class="reference internal" href="#caching">Caching</a></li>
<li><a class="reference internal" href="#dependency-checking">Dependency checking</a></li>
<li><a class="reference internal" href="#gallery">Gallery</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/SphinxReport-1.0.a3/doc/Running.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
    <li><a href="../../index.html">Psithon for PSI4 Documentation</a> &raquo; </li>
 
      </ul>
    </div>
    </div>

    <div class="footer">
        &copy; Copyright 2012, Psi4 Project.
      Last updated on Mar 15, 2012.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>