srcdir = @srcdir@
VPATH = @srcdir@

include ../MakeVars
PSITARGET = $(top_objdir)/bin/$(shell basename `pwd`)

LDLIBS += $(LAPACK) $(BLAS)

PSILIBS = \
-lPSI_ccenergy -lPSI_ccsort -lPSI_input3 -lPSI_cscf -lPSI_cints -lPSI_transqt2 -lPSI_psiclean \
-lPSI_dpd -lPSI_chkpt -lPSI_iwl -lPSI_psio -lPSI_qt -lPSI_ciomr -lPSI_ipv1 -lPSI_options \
-lPSI_deriv -lPSI_int -lPSI_util -lpthread -lc

CXXSRC = read_atom_basis.cc fragment.cc  \
molecular_system.cc  read_atom_basis.cc set_memory.cc \
fragment.cc  psi4.cc  read_options.cc psi3_simulator.cc

BINOBJ = $(CXXSRC:%.cc=%.o)

#include ../MakeRules

$(PSITARGET): $(BINOBJ) $(PSILIBS)
	$(MKDIRS) `dirname $(PSITARGET)`
	$(LD) $(LDFLAGS) -o $@ $^ $(LDLIBS)

install: $(PSITARGET)
	echo "in psi4 dir"
	$(MKDIRS) $(DESTDIR)$(bindir)
	$(INSTALL_PROGRAM) $< $(DESTDIR)$(bindir)

ifneq ($(DODEPEND),no)
$(BINOBJ:%.o=%.d): $(DEPENDINCLUDE)
include $(BINOBJ:%.o=%.d)
endif

